---
title: "Video Upload"
description: "Upload videos to Mosaic in three simple steps"
---

Mosaic uses a streamlined 3-step process for video uploads, leveraging Google Cloud Storage's resumable upload feature for reliable handling of large files. This allows you to upload directly to cloud storage using pre-signed URLs with automatic recovery from network interruptions.

## Upload Limits

- **Maximum duration**: 90 minutes
- **Maximum file size**: 5 GB

## Upload Process Overview

1. **Get an upload URL** - Request a pre-signed URL from the API
2. **Upload your video** - POST your video to the URL using resumable upload
3. **Finalize the upload** - Confirm the upload completion

---

## Step 1: GET /videos/get_upload_url

Request a pre-signed URL for uploading your video.

### Request
```bash
curl -X GET "https://api.mosaic.so/videos/get_upload_url" \
  -H "Authorization: Bearer mk_your_api_key"
```

### Response
```json
{
  "video_id": "550e8400-e29b-41d4-a716-446655440000",
  "upload_url": "https://storage.googleapis.com/mosaic-uploads/..."
}
```

| Field | Type | Description |
| --- | --- | --- |
| video_id | string | Unique identifier for your video |
| upload_url | string | Pre-signed URL for uploading (expires in 1 hour) |

---

## Step 2: Upload to the URL

Upload your video file directly to the provided `upload_url` using a POST request with Google Cloud Storage resumable upload.

```bash
curl -X POST "$UPLOAD_URL" \
  -H "Content-Type: video/mp4" \
  -H "X-Goog-Resumable: start" \
  --data-binary @your-video.mp4
```

### TypeScript Example

```typescript
async function uploadVideo(uploadUrl: string, videoFile: File): Promise<void> {
  const response = await fetch(uploadUrl, {
    method: 'POST',
    headers: {
      'Content-Type': videoFile.type || 'video/mp4',
      'X-Goog-Resumable': 'start'
    },
    body: videoFile
  });

  if (!response.ok) {
    throw new Error(`Upload failed: ${response.statusText}`);
  }
}
```

<Note>
**Important**: 
- The upload URL expires after 1 hour
- Set the correct `Content-Type` header matching your video format
- Videos must be under 90 minutes and 5 GB in size
- Uses Google Cloud Storage resumable uploads for reliability with large files
</Note>

---

## Step 3: POST /videos/finalize_upload

Finalize the upload to make your video available for processing.

### Request
```bash
curl -X POST "https://api.mosaic.so/videos/finalize_upload" \
  -H "Authorization: Bearer mk_your_api_key" \
  -H "Content-Type: application/json" \
  -d '{
    "video_id": "550e8400-e29b-41d4-a716-446655440000"
  }'
```

### Request Body
| Field | Type | Required | Description |
| --- | --- | --- | --- |
| video_id | string | âœ… | The video ID from step 1 |

### Response
```json
{
  "status": "ok"
}
```

---

## Complete Examples

### Bash Example

```bash
# Step 1: Get upload URL
RESPONSE=$(curl -s -X GET "https://api.mosaic.so/videos/get_upload_url" \
  -H "Authorization: Bearer $MOSAIC_API_KEY")

VIDEO_ID=$(echo $RESPONSE | jq -r '.video_id')
UPLOAD_URL=$(echo $RESPONSE | jq -r '.upload_url')

# Step 2: Upload video using POST with resumable upload
curl -X POST "$UPLOAD_URL" \
  -H "Content-Type: video/mp4" \
  -H "X-Goog-Resumable: start" \
  --data-binary @my-video.mp4

# Step 3: Finalize upload
curl -X POST "https://api.mosaic.so/videos/finalize_upload" \
  -H "Authorization: Bearer $MOSAIC_API_KEY" \
  -H "Content-Type: application/json" \
  -d "{\"video_id\": \"$VIDEO_ID\"}"
```

### TypeScript Example

```typescript
interface UploadUrlResponse {
  video_id: string;
  upload_url: string;
}

async function uploadVideoToMosaic(
  apiKey: string, 
  videoFile: File
): Promise<string> {
  // Step 1: Get upload URL
  const getUrlResponse = await fetch('https://api.mosaic.so/videos/get_upload_url', {
    method: 'GET',
    headers: {
      'Authorization': `Bearer ${apiKey}`
    }
  });
  
  if (!getUrlResponse.ok) {
    throw new Error('Failed to get upload URL');
  }
  
  const { video_id, upload_url }: UploadUrlResponse = await getUrlResponse.json();
  
  // Step 2: Upload video using resumable upload
  const uploadResponse = await fetch(upload_url, {
    method: 'POST',
    headers: {
      'Content-Type': videoFile.type || 'video/mp4',
      'X-Goog-Resumable': 'start'
    },
    body: videoFile
  });
  
  if (!uploadResponse.ok) {
    throw new Error('Failed to upload video');
  }
  
  // Step 3: Finalize upload
  const finalizeResponse = await fetch('https://api.mosaic.so/videos/finalize_upload', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${apiKey}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ video_id })
  });
  
  if (!finalizeResponse.ok) {
    throw new Error('Failed to finalize upload');
  }
  
  return video_id; // Return video ID for use with agent runs
}

// Usage
const fileInput = document.querySelector<HTMLInputElement>('#video-input');
const file = fileInput?.files?.[0];

if (file) {
  try {
    const videoId = await uploadVideoToMosaic('mk_your_api_key', file);
    console.log('Upload successful! Video ID:', videoId);
  } catch (error) {
    console.error('Upload failed:', error);
  }
}
```

## Best Practices

1. **Error Handling**: Always check the response status before proceeding to the next step
2. **Retry Logic**: Implement exponential backoff for network failures
3. **Progress Tracking**: For large files, consider implementing upload progress monitoring
4. **Resumable Uploads**: The POST method with `X-Goog-Resumable: start` header enables Google Cloud Storage's resumable upload feature, which:
   - Automatically handles network interruptions
   - Allows resuming failed uploads without starting over
   - Provides better reliability for large files (up to 5 GB)
   - Optimizes bandwidth usage

## What's Next?

After successfully uploading your video, you can:
- [Run an agent](/overview/agent-operations) to process your video
- [Set up triggers](/overview/triggers) to automatically process new videos
- [Configure webhooks](/overview/webhooks) to receive processing notifications